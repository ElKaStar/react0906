{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\licos\\\\WebstormProjects\\\\react\\\\react0906\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\licos\\\\WebstormProjects\\\\react\\\\react0906\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\licos\\\\WebstormProjects\\\\react\\\\react0906\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\licos\\\\WebstormProjects\\\\react\\\\react0906\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Field,reduxForm}from\"redux-form\";import{alphaNumeric,minLength1,renderField,requiredString}from\"./Validation\";import ReCAPTCHA from\"react-google-recaptcha\";import{connect}from\"react-redux\";import{addMessageActionCreator,addNewMessageTextActionCreator}from\"../../Redux/message-reducer\";import{loginThunkCreator,logoutThunkCreator}from\"../../Redux/auth-reducer\";import{Redirect}from\"react-router-dom\";import'./StyleForm.css';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.submit=function(values){console.log(values);// print the form values to the console\n_this.props.login(values.login,values.password,values.rememberMe);};return _this;}_createClass(Login,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){console.log('login is DIDupdated '+Date());}},{key:\"render\",value:function render(){console.log('props:',this.props);if(this.props.isAuth){return/*#__PURE__*/React.createElement(Redirect,{to:\"/profile\"});}//console.log('login is updated ' + Date())\nreturn/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(LoginReduxForm,{onSubmit:this.submit}));}}]);return Login;}(React.Component);var LoginForm=/*#__PURE__*/function(_React$Component2){_inherits(LoginForm,_React$Component2);var _super2=_createSuper(LoginForm);function LoginForm(props){var _this2;_classCallCheck(this,LoginForm);_this2=_super2.call(this,props);_this2.onChangecaptcha=function(value){_this2.setState({checkedCaptcha:value?true:false});};_this2.state={checkedCaptcha:false};return _this2;}_createClass(LoginForm,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"LOGIN\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.props.handleSubmit},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{label:\"Login\",name:\"login\",type:\"text\",component:renderField,validate:[requiredString,minLength1]})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{label:\"Password\",name:\"password\",type:\"password\",component:renderField,validate:[requiredString,minLength1],warn:alphaNumeric})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{name:\"rememberMe\",type:\"checkbox\",component:renderField}),\"remember me\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{disabled:!this.state.checkedCaptcha,type:\"submit\"},\"Login\"),/*#__PURE__*/React.createElement(\"div\",{className:\"errorForm\"},this.props.error?this.props.error:' '),/*#__PURE__*/React.createElement(ReCAPTCHA,{sitekey:\"6Le4-a8ZAAAAAAdxK3R8n7ntfVnbLYJqwT87stUC\",onChange:this.onChangecaptcha}))));}}]);return LoginForm;}(React.Component);var LoginReduxForm=reduxForm({// a unique name for the form\nform:'LoginForm'})(LoginForm);var mapStateToProps=function mapStateToProps(state){return{isAuth:state.auth.isAuth};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{login:function login(email,password,rememberMe){dispatch(loginThunkCreator(email,password,rememberMe));},logout:function logout(){dispatch(logoutThunkCreator());}};};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["C:/Users/licos/WebstormProjects/react/react0906/src/components/Forms/login.jsx"],"names":["React","Field","reduxForm","alphaNumeric","minLength1","renderField","requiredString","ReCAPTCHA","connect","addMessageActionCreator","addNewMessageTextActionCreator","loginThunkCreator","logoutThunkCreator","Redirect","Login","submit","values","console","log","props","login","password","rememberMe","prevProps","prevState","snapshot","Date","isAuth","Component","LoginForm","onChangecaptcha","value","setState","checkedCaptcha","state","handleSubmit","error","LoginReduxForm","form","mapStateToProps","auth","mapDispatchToProps","dispatch","email","logout"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {alphaNumeric, minLength1, renderField, requiredString} from \"./Validation\";\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\nimport {connect} from \"react-redux\";\r\nimport {addMessageActionCreator, addNewMessageTextActionCreator} from \"../../Redux/message-reducer\";\r\nimport {loginThunkCreator, logoutThunkCreator} from \"../../Redux/auth-reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport './StyleForm.css'\r\n\r\n\r\nclass Login extends React.Component {\r\n\r\n     submit = values => {\r\n         console.log(values)\r\n\r\n          // print the form values to the console\r\n          this.props.login(values.login, values.password, values.rememberMe)\r\n     }\r\n     componentDidUpdate(prevProps, prevState, snapshot) {\r\n         console.log('login is DIDupdated ' + Date())\r\n     }\r\n\r\n\r\n    render() {\r\n         console.log('props:', this.props)\r\n         if (this.props.isAuth) {\r\n             return <Redirect to={\"/profile\"}/>\r\n         }\r\n         //console.log('login is updated ' + Date())\r\n          return (\r\n              <div>\r\n              <LoginReduxForm onSubmit={this.submit}/>\r\n              </div>\r\n              )\r\n     }\r\n\r\n}\r\n\r\nclass LoginForm extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            checkedCaptcha : false\r\n        }\r\n    }\r\n\r\n\r\n\r\n    onChangecaptcha = (value) => {\r\n       this.setState({\r\n           checkedCaptcha: (value? true: false)\r\n       })\r\n    }\r\nrender() {\r\n     return (\r\n         <div>\r\n              <p>LOGIN</p>\r\n              <form onSubmit={this.props.handleSubmit}>\r\n                   <div>\r\n                        <Field\r\n                            label={\"Login\"}\r\n                            name={\"login\"}\r\n                            type=\"text\"\r\n                            component={renderField}\r\n                            validate={[requiredString, minLength1]}\r\n\r\n                        />\r\n                   </div>\r\n                   <div>\r\n                        <Field\r\n                            label={\"Password\"}\r\n                            name={\"password\"}\r\n                            type={\"password\"}\r\n                            component={renderField}\r\n                            validate={[requiredString, minLength1]}\r\n                            warn={alphaNumeric}\r\n                        />\r\n                   </div>\r\n                   <div>\r\n                        <Field\r\n                            name={\"rememberMe\"}\r\n                            type={\"checkbox\"}\r\n                            component={renderField}\r\n                        />remember me\r\n                   </div>\r\n                   <div>\r\n                        <button disabled={!this.state.checkedCaptcha} type={\"submit\"}>Login</button>\r\n                       <div className='errorForm'>{this.props.error ? this.props.error: ' '}</div>\r\n                       <ReCAPTCHA sitekey='6Le4-a8ZAAAAAAdxK3R8n7ntfVnbLYJqwT87stUC' onChange={this.onChangecaptcha}/>\r\n                   </div>\r\n              </form>\r\n         </div>\r\n\r\n     )\r\n}\r\n\r\n}\r\n\r\n\r\nconst LoginReduxForm = reduxForm({\r\n     // a unique name for the form\r\n     form: 'LoginForm'\r\n})(LoginForm)\r\n\r\nlet mapStateToProps = (state) => {\r\n\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        login: (email, password, rememberMe) => {\r\n            dispatch(loginThunkCreator(email, password, rememberMe))\r\n        },\r\n        logout: () => {\r\n            dispatch(logoutThunkCreator())\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)"]},"metadata":{},"sourceType":"module"}