{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0421\\u0435\\u043C\\u0435\\u043D \\u0422\\u0438\\u0442\\u043E\\u0432\\\\WebstormProjects\\\\react0906\\\\src\\\\components\\\\Users\\\\UsersContainer.jsx\";\nimport React from 'react';\nimport Users from \"./Users\";\nimport { connect } from \"react-redux\";\nimport { addFollow, addFollowActionCreator, addNewUsersActionCreator, setCurrentPage, setCurrentPageActionCreator, setFetching, setFetchingActionCreator, setUsers, showLastUsers, showLastUsersActionCreator, showNextUsers, showNextUsersActionCreator } from \"../../Redux/users-reducer\";\nimport * as axios from \"axios\";\nimport Loader from './loader';\n\nclass UserClass extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getUsersFromServer = (pageNumber, pageSize) => {\n      this.props.setFetching(true);\n      axios.get(`https://social-network.samuraijs.com/api/1.0/users?page=${pageNumber}&count=${pageSize}`).then(response => {\n        let newArrUsers = [];\n        response.data.items.map(item => {\n          newArrUsers.push({\n            id: item.id,\n            name: item.name,\n            message: item.status === null ? '' : item.status,\n            url: item.photos.small,\n            follow: item.followed\n          });\n        });\n        debugger;\n        this.props.setUsers(newArrUsers, response.data.totalCount);\n        this.props.setFetching(false);\n      });\n    };\n\n    this.onPageChanged = itemNumber => {\n      this.props.setCurrentPage(itemNumber);\n      this.getUsersFromServer(itemNumber, this.props.pagingSize);\n    };\n\n    this.onClickNextHandler = nextPage => {\n      this.props.showNextUsers();\n      this.getUsersFromServer(nextPage, this.props.pagingSize);\n    };\n\n    this.onClickLastHandler = lastPage => {\n      this.props.showLastUsers();\n      this.getUsersFromServer(lastPage, this.props.pagingSize);\n    };\n  }\n\n  componentDidMount() {\n    this.getUsersFromServer(this.props.currentPage, this.props.pagingSize);\n  }\n\n  render() {\n    let pageCount = Math.ceil(this.props.totalUsersCount / this.props.pagingSize);\n    debugger;\n    let arrPages = [];\n\n    for (let i = 1; i <= pageCount; i++) {\n      arrPages.push(i);\n    } //let newUsers = this.props.users.slice(this.props.startPosition, this.props.startPosition + this.props.pagingSize)\n\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 12\n      }\n    }, this.props.isFetching ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 36\n      }\n    }) : /*#__PURE__*/React.createElement(Users, {\n      pageCount: pageCount,\n      arrPages: arrPages,\n      userPage: this.props,\n      onClickLastHandler: this.onClickLastHandler,\n      onClickNextHandler: this.onClickNextHandler,\n      onPageChanged: this.onPageChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 48\n      }\n    }));\n  }\n\n}\n\nlet mapStateToProps = state => {\n  console.log(state);\n  return {\n    users: state.users.users,\n    pagingSize: state.users.pagingSize,\n    startPosition: state.users.startPosition,\n    totalUsersCount: state.users.totalUsersCount,\n    currentPage: state.users.currentPage,\n    isFetching: state.users.isFetching\n  };\n};\n\nlet mapDispatchToProps = dispatch => {\n  return {\n    showNextUsers: () => {\n      dispatch(showNextUsersActionCreator());\n    },\n    showLastUsers: () => {\n      dispatch(showLastUsersActionCreator());\n    },\n    addFollow: id => {\n      dispatch(addFollowActionCreator(id));\n    },\n    setUsers: (newUsers, totalUsersCount) => {\n      dispatch(addNewUsersActionCreator(newUsers, totalUsersCount));\n    },\n    setCurrentPage: newCurrentPage => {\n      dispatch(setCurrentPageActionCreator(newCurrentPage));\n    },\n    setFetching: isFetching => {\n      dispatch(setFetchingActionCreator(isFetching));\n    }\n  };\n};\n\nconst UsersContainer = connect(mapStateToProps, {\n  showNextUsers,\n  showLastUsers,\n  addFollow,\n  setUsers,\n  setCurrentPage,\n  setFetching\n})(UserClass);\nexport default UsersContainer;","map":{"version":3,"sources":["C:/Users/Семен Титов/WebstormProjects/react0906/src/components/Users/UsersContainer.jsx"],"names":["React","Users","connect","addFollow","addFollowActionCreator","addNewUsersActionCreator","setCurrentPage","setCurrentPageActionCreator","setFetching","setFetchingActionCreator","setUsers","showLastUsers","showLastUsersActionCreator","showNextUsers","showNextUsersActionCreator","axios","Loader","UserClass","Component","constructor","props","getUsersFromServer","pageNumber","pageSize","get","then","response","newArrUsers","data","items","map","item","push","id","name","message","status","url","photos","small","follow","followed","totalCount","onPageChanged","itemNumber","pagingSize","onClickNextHandler","nextPage","onClickLastHandler","lastPage","componentDidMount","currentPage","render","pageCount","Math","ceil","totalUsersCount","arrPages","i","isFetching","mapStateToProps","state","console","log","users","startPosition","mapDispatchToProps","dispatch","newUsers","newCurrentPage","UsersContainer"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Users from \"./Users\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    addFollow,\r\n    addFollowActionCreator,\r\n    addNewUsersActionCreator, setCurrentPage,\r\n    setCurrentPageActionCreator, setFetching,\r\n    setFetchingActionCreator, setUsers,\r\n    showLastUsers,\r\n    showLastUsersActionCreator,\r\n    showNextUsers,\r\n    showNextUsersActionCreator\r\n} from \"../../Redux/users-reducer\";\r\nimport * as axios from \"axios\";\r\nimport Loader from './loader'\r\n\r\n\r\nclass UserClass extends React.Component  {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    getUsersFromServer = (pageNumber, pageSize) => {\r\n        this.props.setFetching(true)\r\n        axios.get(`https://social-network.samuraijs.com/api/1.0/users?page=${pageNumber}&count=${pageSize}`)\r\n            .then(response => {\r\n\r\n                let newArrUsers = []\r\n                response.data.items.map((item) => {\r\n                    newArrUsers.push({\r\n                        id: item.id,\r\n                        name: item.name,\r\n                        message: (item.status === null? '': item.status),\r\n                        url: item.photos.small,\r\n                        follow: item.followed\r\n                    })\r\n                })\r\n                debugger\r\n                this.props.setUsers(newArrUsers, response.data.totalCount)\r\n                this.props.setFetching(false)\r\n            })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getUsersFromServer(this.props.currentPage,this.props.pagingSize)\r\n    }\r\n\r\n    onPageChanged = (itemNumber) => {\r\n        this.props.setCurrentPage(itemNumber)\r\n        this.getUsersFromServer(itemNumber,this.props.pagingSize)\r\n    }\r\n\r\n\r\n\r\n    onClickNextHandler = (nextPage) => {\r\n\r\n        this.props.showNextUsers()\r\n        this.getUsersFromServer(nextPage,this.props.pagingSize)\r\n    }\r\n\r\n    onClickLastHandler = (lastPage) => {\r\n\r\n        this.props.showLastUsers()\r\n        this.getUsersFromServer(lastPage,this.props.pagingSize)\r\n    }\r\n\r\n    render() {\r\n        let pageCount = Math.ceil(this.props.totalUsersCount/this.props.pagingSize)\r\n        debugger\r\n        let arrPages = []\r\n        for (let i=1; i<= pageCount; i++) {\r\n            arrPages.push(i)\r\n        }\r\n        //let newUsers = this.props.users.slice(this.props.startPosition, this.props.startPosition + this.props.pagingSize)\r\n        return (\r\n           <div>\r\n           {this.props.isFetching? <Loader/> : <Users pageCount={pageCount}\r\n                      arrPages={arrPages}\r\n                      userPage={this.props}\r\n                      onClickLastHandler={this.onClickLastHandler}\r\n                      onClickNextHandler={this.onClickNextHandler}\r\n                      onPageChanged={this.onPageChanged}\r\n        />}\r\n           </div>)\r\n    }\r\n\r\n\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    console.log(state);\r\n    return {\r\n        users: state.users.users,\r\n        pagingSize: state.users.pagingSize,\r\n        startPosition: state.users.startPosition,\r\n        totalUsersCount: state.users.totalUsersCount,\r\n        currentPage: state.users.currentPage,\r\n        isFetching: state.users.isFetching\r\n\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        showNextUsers: () => {dispatch(showNextUsersActionCreator())},\r\n        showLastUsers: () => {dispatch(showLastUsersActionCreator())},\r\n        addFollow: (id) => {dispatch(addFollowActionCreator(id))},\r\n        setUsers: (newUsers, totalUsersCount) => {dispatch(addNewUsersActionCreator(newUsers, totalUsersCount))},\r\n        setCurrentPage: (newCurrentPage) => {dispatch(setCurrentPageActionCreator(newCurrentPage))},\r\n        setFetching: (isFetching) => {dispatch(setFetchingActionCreator(isFetching))}\r\n    }\r\n}\r\n\r\nconst UsersContainer = connect(mapStateToProps,\r\n    {\r\n        showNextUsers,\r\n        showLastUsers,\r\n        addFollow,\r\n        setUsers,\r\n        setCurrentPage,\r\n        setFetching\r\n    }\r\n    )(UserClass)\r\nexport default UsersContainer"]},"metadata":{},"sourceType":"module"}