{"ast":null,"code":"const NEXT_USERS = 'NEXT-USERS';\nconst LAST_USERS = 'LAST-USERS';\nconst FOLLOW = 'FOLLOW';\nconst SET_USERS = 'SET-USERS';\nconst SET_CURRENT_PAGE = 'SET-CURRENT-PAGE';\nconst SET_FETCHING = 'SET-FETCHING;';\nlet initialState = {\n  users: [],\n  pagingSize: 4,\n  startPosition: 0,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false\n};\n\nconst usersReducer = (state = initialState, action) => {\n  debugger;\n\n  switch (action.type) {\n    case NEXT_USERS:\n      {\n        if (state.currentPage <= Math.ceil(state.totalUsersCount / state.pagingSize)) {\n          return { ...state,\n            currentPage: state.currentPage + 1\n          };\n        } else {\n          alert(\"Пользователей больше нет\");\n          return state;\n        }\n      }\n\n    case LAST_USERS:\n      {\n        if (state.currentPage > 1) {\n          return { ...state,\n            currentPage: state.currentPage - 1\n          };\n        } else {\n          alert(\"Это начало списка\");\n          return state;\n        }\n      }\n\n    case FOLLOW:\n      {\n        let copyUsers = [...state.users];\n        copyUsers.map(item => {\n          if (item.id === action.id) {\n            item.follow = !item.follow;\n          }\n        });\n        return { ...state,\n          users: copyUsers\n        };\n      }\n\n    case SET_USERS:\n      {\n        let copyUsers = [...action.newUsers];\n        let copyState = { ...state,\n          users: copyUsers,\n          totalUsersCount: action.totalUsersCount\n        };\n        return copyState;\n      }\n\n    case SET_CURRENT_PAGE:\n      {\n        debugger;\n        return { ...state,\n          currentPage: action.newCurrentPage\n        };\n      }\n\n    case SET_FETCHING:\n      {\n        return { ...state,\n          isFetching: action.isFetching\n        };\n      }\n\n    default:\n      return state;\n  }\n\n  return state;\n};\n\nexport const showNextUsersActionCreator = () => {\n  return {\n    type: NEXT_USERS\n  };\n};\nexport const showLastUsersActionCreator = () => {\n  return {\n    type: LAST_USERS\n  };\n};\nexport const addFollowActionCreator = id => {\n  return {\n    type: FOLLOW,\n    id: id\n  };\n};\nexport const addNewUsersActionCreator = (newUsers, totalUsersCount) => {\n  return {\n    type: SET_USERS,\n    newUsers: newUsers,\n    totalUsersCount: totalUsersCount\n  };\n};\nexport const setCurrentPageActionCreator = newCurrentPage => {\n  return {\n    type: SET_CURRENT_PAGE,\n    newCurrentPage: newCurrentPage\n  };\n};\nexport const setFetchingActionCreator = isFetching => {\n  return {\n    type: SET_FETCHING,\n    isFetching: isFetching\n  };\n};\nexport default usersReducer;","map":{"version":3,"sources":["C:/Users/Семен Титов/WebstormProjects/react0906/src/Redux/users-reducer.js"],"names":["NEXT_USERS","LAST_USERS","FOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_FETCHING","initialState","users","pagingSize","startPosition","totalUsersCount","currentPage","isFetching","usersReducer","state","action","type","Math","ceil","alert","copyUsers","map","item","id","follow","newUsers","copyState","newCurrentPage","showNextUsersActionCreator","showLastUsersActionCreator","addFollowActionCreator","addNewUsersActionCreator","setCurrentPageActionCreator","setFetchingActionCreator"],"mappings":"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","sourcesContent":["const NEXT_USERS = 'NEXT-USERS';\r\nconst LAST_USERS = 'LAST-USERS';\r\nconst FOLLOW = 'FOLLOW';\r\nconst SET_USERS = 'SET-USERS';\r\nconst SET_CURRENT_PAGE = 'SET-CURRENT-PAGE';\r\nconst SET_FETCHING = 'SET-FETCHING;'\r\n\r\n\r\nlet initialState = {\r\n    users: [],\r\n    pagingSize: 4,\r\n    startPosition: 0,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false\r\n\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\ndebugger\r\n\r\n    switch (action.type) {\r\n        case NEXT_USERS: {\r\n\r\n            if (state.currentPage <= Math.ceil(state.totalUsersCount/state.pagingSize)) { return {\r\n                ...state,\r\n                currentPage: state.currentPage + 1\r\n            }} else {\r\n                alert(\"Пользователей больше нет\")\r\n                return state\r\n            }\r\n        }\r\n        case LAST_USERS: {\r\n            if (state.currentPage > 1) {return {\r\n                ...state,\r\n                currentPage: state.currentPage - 1\r\n            }} else {\r\n                alert(\"Это начало списка\")\r\n                return state\r\n            }\r\n        }\r\n        case FOLLOW: {\r\n           let copyUsers = [...state.users]\r\n            copyUsers.map((item) => {\r\n                if (item.id === action.id) {\r\n                   item.follow = !item.follow\r\n                }\r\n            } )\r\n            return {\r\n               ...state,\r\n                users: copyUsers\r\n            }\r\n        }\r\n        case SET_USERS: {\r\n           let copyUsers = [...action.newUsers]\r\n           let copyState = {\r\n                ...state,\r\n                users: copyUsers,\r\n               totalUsersCount: action.totalUsersCount\r\n            }\r\n            return copyState;\r\n        }\r\n        case SET_CURRENT_PAGE: {\r\n            debugger\r\n            return {\r\n                ...state,\r\n                currentPage: action.newCurrentPage\r\n            }\r\n        }\r\n        case SET_FETCHING: {\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n\r\n    return state\r\n}\r\nexport const showNextUsersActionCreator = () => {\r\n\r\n    return (\r\n        {\r\n            type: NEXT_USERS\r\n        }\r\n    )\r\n}\r\nexport const showLastUsersActionCreator = () => {\r\n\r\n    return (\r\n        {\r\n            type: LAST_USERS\r\n        }\r\n    )\r\n}\r\n\r\nexport const addFollowActionCreator = (id) => {\r\n\r\n    return (\r\n        {\r\n            type: FOLLOW,\r\n            id: id\r\n        }\r\n    )\r\n}\r\n\r\nexport const addNewUsersActionCreator = (newUsers, totalUsersCount) => {\r\n\r\n    return (\r\n        {\r\n            type: SET_USERS,\r\n            newUsers: newUsers,\r\n            totalUsersCount: totalUsersCount\r\n        }\r\n    )\r\n}\r\n\r\nexport const setCurrentPageActionCreator = (newCurrentPage) => {\r\n\r\n    return (\r\n        {\r\n            type: SET_CURRENT_PAGE,\r\n            newCurrentPage: newCurrentPage\r\n        }\r\n    )\r\n}\r\n\r\nexport const setFetchingActionCreator = (isFetching) => {\r\n\r\n    return (\r\n        {\r\n            type: SET_FETCHING,\r\n            isFetching: isFetching\r\n        }\r\n    )\r\n}\r\n\r\n\r\nexport default usersReducer"]},"metadata":{},"sourceType":"module"}